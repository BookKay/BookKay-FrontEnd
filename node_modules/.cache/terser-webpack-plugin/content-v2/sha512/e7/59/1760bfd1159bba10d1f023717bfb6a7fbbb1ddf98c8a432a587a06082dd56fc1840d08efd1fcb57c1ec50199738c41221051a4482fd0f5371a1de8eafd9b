{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[7],{\"153d\":function(t,e,r){},\"247a\":function(t,e,r){\"use strict\";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"q-page\",{staticClass:\"flex\"},[r(\"div\",{staticClass:\"col\"},[t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_front_matter?r(\"chapters-list\",{attrs:{type:\"front-matter\"}}):t._e(),t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_chapter?r(\"chapters-list\",{attrs:{type:\"chapter\"}}):r(\"q-btn\",{staticClass:\"q-ma-md\",attrs:{label:\"Edit main body text\",icon:\"edit\",color:\"primary\",to:{name:\"write-editor\",query:{manuscript:t.$store.getters[\"write/manuscriptProperty\"](\"id\")}}}}),t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_back_matter?r(\"chapters-list\",{attrs:{type:\"back-matter\"}}):t._e(),t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_front_matter||t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_chapter||t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_back_matter?r(\"add-chapter-button\"):t._e()],1)])},i=[],s=r(\"ded3\"),n=r.n(s),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",[r(\"q-page-sticky\",{attrs:{position:\"bottom-right\",offset:[30,18]}},[r(\"q-fab\",{attrs:{icon:\"add\",size:\"md\",direction:\"up\",color:\"primary\"}},[t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_back_matter?r(\"q-fab-action\",{attrs:{color:\"primary\",label:\"BackMatter\"},on:{click:function(e){t.type=\"Back Matter\",t.add_chapter=!0}}}):t._e(),t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_chapter?r(\"q-fab-action\",{attrs:{color:\"primary\",label:\"Chapter\"},on:{click:function(e){t.type=\"Chapter\",t.add_chapter=!0}}}):t._e(),t.$store.getters[\"write/manuscriptProperty\"](\"configs\").contain_front_matter?r(\"q-fab-action\",{attrs:{color:\"primary\",label:\"FrontMatter\"},on:{click:function(e){t.type=\"Front Matter\",t.add_chapter=!0}}}):t._e()],1)],1),r(\"q-dialog\",{ref:\"chapterDialog\",attrs:{persistent:\"\"},model:{value:t.add_chapter,callback:function(e){t.add_chapter=e},expression:\"add_chapter\"}},[r(\"q-card\",{staticStyle:{width:\"700px\",\"max-width\":\"80vw\"}},[r(\"q-card-section\",[r(\"div\",{staticClass:\"text-h6\"},[t._v(\"Title\")])]),r(\"q-card-section\",{staticClass:\"q-pt-none\"},[r(\"q-input\",{ref:\"titleInput\",attrs:{dense:\"\",placeholder:t.titlePlaceholder,rules:[function(t){return null!==t&&\"\"!==t||\"Please type the title\"},function(t){return t.length<=100||\"Title must be smaller than 100\"}],autofocus:\"\",autogrow:\"\"},on:{keydown:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:(e.preventDefault(),t.$refs.draftInput.focus())}},model:{value:t.chapter.title,callback:function(e){t.$set(t.chapter,\"title\",e)},expression:\"chapter.title\"}})],1),r(\"q-card-section\",[r(\"div\",{staticClass:\"text-h6\"},[t._v(\"Draft\")])]),r(\"q-card-section\",{staticClass:\"q-pt-none\"},[r(\"q-input\",{ref:\"draftInput\",attrs:{dense:\"\",placeholder:t.draftPlaceholder,autogrow:\"\"},model:{value:t.chapter.draft,callback:function(e){t.$set(t.chapter,\"draft\",e)},expression:\"chapter.draft\"}})],1),r(\"q-card-actions\",{staticClass:\"text-primary\",attrs:{align:\"right\"}},[r(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Cancel\"},on:{click:function(e){t.chapter.title=\"\",t.chapter.draft=\"\",t.type=\"\"}}}),r(\"q-btn\",{attrs:{flat:\"\",label:\"Confirm\"},on:{click:t.add}})],1)],1)],1)],1)},c=[],p=(r(\"ac1f\"),r(\"5319\"),{name:\"AddChapterButton\",data:function(){return{chapter:{title:\"\",draft:\"\",index:0,text:\"\",manuscript_id:this.$store.getters[\"write/manuscriptProperty\"](\"id\")},type:\"\",add_chapter:!1}},computed:{titlePlaceholder:function(){return\"Title of this \"+this.type.toLowerCase()+\"?\"},draftPlaceholder:function(){return\"What shall I include in this \"+this.type.toLowerCase()+\"?\"}},methods:{add:function(){var t=this;if(this.$refs.titleInput.validate(),this.$refs.draftInput.validate(),!this.$refs.titleInput.hasError&&!this.$refs.draftInput.hasError){this.chapter.index=this.$store.getters[\"write/manuscriptProperty\"](this.type.toLowerCase().replace(\" \",\"_\")+\"s\").length;var e={chapter:this.chapter,type:this.type};this.$store.dispatch(\"write/addChapter\",e).then((function(t){})).catch((function(e){t.$q.notify({color:\"negative\",position:\"top\",message:e.response.data.message||\"Something went wrong\",icon:\"error\"})})),this.chapter.title=\"\",this.chapter.draft=\"\",this.type=\"\",this.$refs.chapterDialog.hide()}}}}),l=p,d=r(\"2877\"),h=r(\"de5e\"),u=r(\"c294\"),f=r(\"72db\"),m=r(\"24e8\"),g=r(\"f09f\"),y=r(\"a370\"),v=r(\"27f9\"),b=r(\"4b7e\"),_=r(\"9c40\"),C=r(\"7f67\"),w=r(\"eebe\"),q=r.n(w),$=Object(d[\"a\"])(l,o,c,!1,null,null,null),x=$.exports;q()($,\"components\",{QPageSticky:h[\"a\"],QFab:u[\"a\"],QFabAction:f[\"a\"],QDialog:m[\"a\"],QCard:g[\"a\"],QCardSection:y[\"a\"],QInput:v[\"a\"],QCardActions:b[\"a\"],QBtn:_[\"a\"]}),q()($,\"directives\",{ClosePopup:C[\"a\"]});var k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",[r(\"div\",{staticClass:\"row q-ml-md\"},[r(\"h2\",{staticClass:\"q-mb-md text-capitalize\"},[t._v(t._s(t.type.split(\"-\").join(\" \")))])]),r(\"q-separator\",{attrs:{inset:\"\"}}),r(\"div\",{staticClass:\"row q-ml-md\"},[r(\"q-btn\",{attrs:{icon:\"reorder\",label:\"Reorder\",color:\"positive\"},on:{click:function(e){t.reorder=!0}}})],1),r(\"div\",{staticClass:\"q-mt-md row\"},t._l(this.chapters,(function(e){return r(\"chapter\",{key:e.id,staticClass:\"col-md-3 col-sm-6 col-xs-12\",class:t.alignment,attrs:{chapter:e,type:t.$props.type},on:{titleEditted:t.editTitle,draftEditted:t.editDraft,deleted:t.deleteChapter}})})),1),r(\"q-dialog\",{ref:\"reorderDialog\",attrs:{persistent:\"\"},model:{value:t.reorder,callback:function(e){t.reorder=e},expression:\"reorder\"}},[r(\"q-card\",{staticStyle:{\"min-width\":\"350px\"}},[r(\"q-card-section\",[r(\"div\",{staticClass:\"text-h4 text-capitalize\"},[t._v(\"\\n          \"+t._s(t.type.split(\"-\").join(\" \"))+\"s\\n        \")])]),r(\"q-card-section\",{staticClass:\"q-pt-none\"},[r(\"list-draggable\",{attrs:{items:t.chaptersCopy,dataName:\"title\"},on:{dropped:t.handleDrop}})],1),r(\"q-card-actions\",{staticClass:\"text-primary\",attrs:{align:\"right\"}},[r(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Cancel\"},on:{click:function(e){t.chaptersCopy=t.chapters}}}),r(\"q-btn\",{attrs:{flat:\"\",label:\"Confirm\"},on:{click:t.confirmOrder}})],1)],1)],1)],1)},D=[],P=(r(\"4e82\"),r(\"a434\"),r(\"7db0\"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",[r(\"q-card\",{staticClass:\"normal-card q-mb-md\"},[r(\"q-card-section\",[r(\"div\",{staticClass:\"items-center no-wrap\"},[r(\"div\",{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"text-h6 ellipsis relative-position q-mb-sm q-pl-sm\",on:{click:function(e){t.edit_title=!0}}},[t._v(\"\\n          Title:\\n          \"),r(\"span\",{staticClass:\"text-body1 q-pa-sm text\"},[t._v(t._s(t.chapter.title))])]),r(\"div\",{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"text-h6 relative-position q-mb-sm q-pl-sm\",on:{click:function(e){t.edit_draft=!0}}},[t._v(\"\\n          Draft:\\n          \"),r(\"div\",{staticClass:\"text-body1 text\"},[t._v(\"\\n            \"+t._s(t.chapter.draft)+\"\\n          \")])])])]),r(\"q-card-actions\",{staticClass:\"justify-end\"},[r(\"div\",{staticClass:\"row\"},[r(\"q-btn\",{attrs:{icon:\"delete\",color:\"negative\",round:\"\",flat:\"\"},on:{click:function(e){t.confirm_delete=!0}}})],1),r(\"div\",{staticClass:\"row\"},[r(\"q-btn\",{staticClass:\"q-ml-md\",attrs:{label:\"Edit\",color:\"primary\"},on:{click:t.edit}})],1)])],1),r(\"q-dialog\",{ref:\"titleDialog\",attrs:{persistent:\"\"},model:{value:t.edit_title,callback:function(e){t.edit_title=e},expression:\"edit_title\"}},[r(\"q-card\",{staticStyle:{\"min-width\":\"350px\"}},[r(\"q-card-section\",[r(\"div\",{staticClass:\"text-h6\"},[t._v(\"Title\")])]),r(\"q-card-section\",{staticClass:\"q-pt-none\"},[r(\"q-input\",{ref:\"titleInput\",attrs:{dense:\"\",rules:[function(t){return null!==t&&\"\"!==t||\"Please type the title\"},function(t){return t.length<=100||\"Title must be smaller than 100\"}],autofocus:\"\",autogrow:\"\"},on:{keydown:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:(e.preventDefault(),t.confirmTitle(e))}},model:{value:t.new_title,callback:function(e){t.new_title=e},expression:\"new_title\"}})],1),r(\"q-card-actions\",{staticClass:\"text-primary\",attrs:{align:\"right\"}},[r(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Cancel\"},on:{click:function(e){t.new_title=t.$props.chapter.title}}}),r(\"q-btn\",{attrs:{flat:\"\",label:\"Confirm\"},on:{click:t.confirmTitle}})],1)],1)],1),r(\"q-dialog\",{ref:\"draftDialog\",attrs:{persistent:\"\"},model:{value:t.edit_draft,callback:function(e){t.edit_draft=e},expression:\"edit_draft\"}},[r(\"q-card\",{staticStyle:{\"min-width\":\"350px\"}},[r(\"q-card-section\",[r(\"div\",{staticClass:\"text-h6\"},[t._v(\"Draft\")])]),r(\"q-card-section\",{staticClass:\"q-pt-none\"},[r(\"q-input\",{ref:\"draftInput\",attrs:{dense:\"\",autofocus:\"\",autogrow:\"\"},model:{value:t.new_draft,callback:function(e){t.new_draft=e},expression:\"new_draft\"}})],1),r(\"q-card-actions\",{staticClass:\"text-primary\",attrs:{align:\"right\"}},[r(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Cancel\"},on:{click:function(e){t.new_draft=t.$props.chapter.draft}}}),r(\"q-btn\",{attrs:{flat:\"\",label:\"Confirm\"},on:{click:t.confirmDraft}})],1)],1)],1),r(\"q-dialog\",{ref:\"deleteDialog\",attrs:{persistent:\"\"},model:{value:t.confirm_delete,callback:function(e){t.confirm_delete=e},expression:\"confirm_delete\"}},[r(\"q-card\",[r(\"q-card-section\",{staticClass:\"row items-center\"},[r(\"span\",{staticClass:\"q-ml-sm\"},[t._v(\"Are you sure you want delete? All related data of the chapter\\n          (including child sections if present) will be lost\")])]),r(\"q-card-actions\",{attrs:{align:\"right\"}},[r(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Cancel\",color:\"primary\"}}),r(\"q-btn\",{attrs:{flat:\"\",icon:\"delete\",label:\"Delete\",color:\"negative\"},on:{click:t.confirmDelete}})],1)],1)],1)],1)}),Q=[],I={name:\"Chapter\",props:{chapter:{type:Object,required:!0},type:{type:String,required:!0}},data:function(){return{new_title:this.$props.chapter.title,new_draft:this.$props.chapter.draft,edit_title:!1,edit_draft:!1,edit_all:!1,confirm_delete:!1}},methods:{confirmTitle:function(){var t=this;if(this.$refs.titleInput.validate(),!this.$refs.titleInput.hasError){var e=this.$props.chapter.title;this.$emit(\"titleEditted\",this.new_title,this.$props.chapter);var r={chapter:{title:this.new_title},id:this.$props.chapter.id,type:this.$props.type};this.$store.dispatch(\"write/editChapter\",r).then((function(t){})).catch((function(r){t.$emit(\"titleEditted\",e,t.$props.chapter),t.$q.notify({color:\"negative\",position:\"top\",message:r.response.data.message||\"Something went wrong\",icon:\"error\"})})),this.$refs.titleDialog.hide()}},confirmDraft:function(){var t=this;if(this.$refs.draftInput.validate(),!this.$refs.draftInput.hasError){var e=this.$props.chapter.draft;this.$emit(\"draftEditted\",this.new_draft,this.$props.chapter);var r={chapter:{draft:this.new_draft},id:this.$props.chapter.id,type:this.$props.type};this.$store.dispatch(\"write/editChapter\",r).then((function(t){})).catch((function(r){t.$emit(\"titleEditted\",e,t.$props.chapter),t.$q.notify({color:\"negative\",position:\"top\",message:r.response.data.message||\"Something went wrong\",icon:\"error\"})})),this.$refs.draftDialog.hide()}},confirmDelete:function(){this.$emit(\"deleted\",this.chapter),this.$refs.deleteDialog.hide()},edit:function(){switch(this.$props.type){case\"front-matter\":this.$router.push({name:\"write-editor\",query:{front_matter:this.$props.chapter.id}});break;case\"chapter\":this.$router.push({name:\"write-editor\",query:{chapter:this.$props.chapter.id}});break;case\"back-matter\":this.$router.push({name:\"write-editor\",query:{back_matter:this.$props.chapter.id}});break}}}},E=I,S=(r(\"e4a8\"),r(\"714f\")),j=Object(d[\"a\"])(E,P,Q,!1,null,\"9da7db6e\",null),O=j.exports;q()(j,\"components\",{QCard:g[\"a\"],QCardSection:y[\"a\"],QCardActions:b[\"a\"],QBtn:_[\"a\"],QDialog:m[\"a\"],QInput:v[\"a\"]}),q()(j,\"directives\",{Ripple:S[\"a\"],ClosePopup:C[\"a\"]});var T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"simple-page\"},[r(\"Container\",{attrs:{\"lock-axis\":\"y\"},on:{drop:t.onDrop}},t._l(t.itemsCopy,(function(e){return r(\"Draggable\",{key:e.id},[r(\"div\",{staticClass:\"draggable-item\"},[t._v(\"\\n        \"+t._s(e[t.$props.dataName])+\"\\n      \")])])})),1)],1)},N=[],A=r(\"448a\"),B=r.n(A),L=r(\"3f7d\"),R={name:\"ListDraggable\",components:{Container:L[\"Container\"],Draggable:L[\"Draggable\"]},props:{items:{type:Array,required:!0},dataName:{type:String,default:\"data\"}},data:function(){return{itemsCopy:this.$props.items}},methods:{onDrop:function(t){this.itemsCopy=this.applyDrag(this.itemsCopy,t),this.$emit(\"dropped\",this.itemsCopy)},applyDrag:function(t,e){var r=e.removedIndex,a=e.addedIndex,i=e.payload;if(null===r&&null===a)return t;var s=B()(t),n=i;return null!==r&&(n=s.splice(r,1)[0]),null!==a&&s.splice(a,0,n),s}}},F=R,M=(r(\"3241\"),Object(d[\"a\"])(F,T,N,!1,null,\"65c93e26\",null)),W=M.exports,z={components:{Chapter:O,ListDraggable:W},mounted:function(){this.chaptersCopy=this.chapters},props:{type:{type:String,required:!0}},data:function(){return{chaptersCopy:[],reorder:!1}},computed:{copyChapters:function(){for(var t=[],e=0;e<this.chaptersCopy.length;e++){var r=this.chaptersCopy[e];t.push({id:r.id,data:r.title,draft:r.draft,text:r.text,index:r.index})}return t},chapters:function(){var t=null;switch(this.$props.type){case\"chapter\":t=this.$store.getters[\"write/manuscriptProperty\"](\"chapters\");break;case\"front-matter\":t=this.$store.getters[\"write/manuscriptProperty\"](\"front_matters\");break;case\"back-matter\":t=this.$store.getters[\"write/manuscriptProperty\"](\"back_matters\");break;case\"section\":break;default:}return t.sort(this.compareIndex),t},alignment:function(){return this.$q.screen.lt.md?\"justify-center\":\"justify-start\"}},methods:{compareIndex:function(t,e){return t.index<e.index?-1:t.index>e.index?1:0},editTitle:function(t,e){e.title=t},editDraft:function(t,e){e.draft=t},deleteChapter:function(t){var e=this,r=this.chapters.indexOf(t);this.chapters.splice(r,1);var a={id:t.id,type:this.$props.type};this.$store.dispatch(\"write/deleteChapter\",a).then((function(t){})).catch((function(a){e.$q.notify({color:\"negative\",position:\"top\",message:a.response.data.message||\"Something went wrong\",icon:\"error\"}),e.chapters.splice(r,0,t)}))},confirmOrder:function(){for(var t=this,e=function(){var e=t.chapters[r],a=t.chaptersCopy.find((function(t){return t.id===e.id}));if(e.index!=a.index){var i={chapter:{index:a.index,manuscript_id:t.$store.getters[\"write/manuscriptProperty\"](\"id\")},type:t.$props.type,id:e.id};t.$store.dispatch(\"write/editChapter\",i).then((function(t){})).catch((function(e){t.$q.notify({color:\"negative\",position:\"top\",message:e.response.data.message||\"Something went wrong\",icon:\"error\"})}))}},r=0;r<this.chapters.length;r++)e();this.$refs.reorderDialog.hide()},handleDrop:function(t){for(var e=0;e<t.length;e++)t[e].index=e+1;this.chaptersCopy=t}}},H=z,J=r(\"eb85\"),G=Object(d[\"a\"])(H,k,D,!1,null,null,null),K=G.exports;q()(G,\"components\",{QSeparator:J[\"a\"],QBtn:_[\"a\"],QDialog:m[\"a\"],QCard:g[\"a\"],QCardSection:y[\"a\"],QCardActions:b[\"a\"]}),q()(G,\"directives\",{ClosePopup:C[\"a\"]});var U=r(\"2f62\"),V={components:{ChaptersList:K,AddChapterButton:x},name:\"ChapterPage\",computed:n()({},Object(U[\"b\"])({count:function(t){return t.module.count}})),data:function(){return{front_matters:[{id:\"123\",title:\"He Returns\",draft:\"Write about how he returns\"}],chapters:[{id:\"123\",title:\"He Returns\",draft:\"Write about how he returns\"}],back_matters:[{id:\"123\",title:\"He Returns\",draft:\"Write about how he returns\"}]}},methods:{}},X=V,Y=r(\"9989\"),Z=Object(d[\"a\"])(X,a,i,!1,null,null,null);e[\"default\"]=Z.exports;q()(Z,\"components\",{QPage:Y[\"a\"],QBtn:_[\"a\"]})},3241:function(t,e,r){\"use strict\";r(\"6a2f\")},\"6a2f\":function(t,e,r){},e4a8:function(t,e,r){\"use strict\";r(\"153d\")}}]);","name":"js/7.ab9266d1.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[7],{\n\n/***/ \"153d\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ \"247a\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/write/OverviewPage.vue?vue&type=template&id=bad68aaa&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{staticClass:\"flex\"},[_c('div',{staticClass:\"col\"},[(\n        _vm.$store.getters['write/manuscriptProperty']('configs')\n          .contain_front_matter\n      )?_c('chapters-list',{attrs:{\"type\":\"front-matter\"}}):_vm._e(),(\n        _vm.$store.getters['write/manuscriptProperty']('configs').contain_chapter\n      )?_c('chapters-list',{attrs:{\"type\":\"chapter\"}}):_c('q-btn',{staticClass:\"q-ma-md\",attrs:{\"label\":\"Edit main body text\",\"icon\":\"edit\",\"color\":\"primary\",\"to\":{\n        name: 'write-editor',\n        query: {\n          manuscript: _vm.$store.getters['write/manuscriptProperty']('id')\n        }\n      }}}),(\n        _vm.$store.getters['write/manuscriptProperty']('configs')\n          .contain_back_matter\n      )?_c('chapters-list',{attrs:{\"type\":\"back-matter\"}}):_vm._e(),(\n        _vm.$store.getters['write/manuscriptProperty']('configs')\n          .contain_front_matter ||\n          _vm.$store.getters['write/manuscriptProperty']('configs')\n            .contain_chapter ||\n          _vm.$store.getters['write/manuscriptProperty']('configs')\n            .contain_back_matter\n      )?_c('add-chapter-button'):_vm._e()],1)])}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/pages/write/OverviewPage.vue?vue&type=template&id=bad68aaa&\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/objectSpread2.js\nvar objectSpread2 = __webpack_require__(\"ded3\");\nvar objectSpread2_default = /*#__PURE__*/__webpack_require__.n(objectSpread2);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/write/AddChapterButton.vue?vue&type=template&id=27be10c0&\nvar AddChapterButtonvue_type_template_id_27be10c0_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('q-page-sticky',{attrs:{\"position\":\"bottom-right\",\"offset\":[30, 18]}},[_c('q-fab',{attrs:{\"icon\":\"add\",\"size\":\"md\",\"direction\":\"up\",\"color\":\"primary\"}},[(\n          _vm.$store.getters['write/manuscriptProperty']('configs')\n            .contain_back_matter\n        )?_c('q-fab-action',{attrs:{\"color\":\"primary\",\"label\":\"BackMatter\"},on:{\"click\":function($event){(_vm.type = 'Back Matter'), (_vm.add_chapter = true)}}}):_vm._e(),(\n          _vm.$store.getters['write/manuscriptProperty']('configs')\n            .contain_chapter\n        )?_c('q-fab-action',{attrs:{\"color\":\"primary\",\"label\":\"Chapter\"},on:{\"click\":function($event){(_vm.type = 'Chapter'), (_vm.add_chapter = true)}}}):_vm._e(),(\n          _vm.$store.getters['write/manuscriptProperty']('configs')\n            .contain_front_matter\n        )?_c('q-fab-action',{attrs:{\"color\":\"primary\",\"label\":\"FrontMatter\"},on:{\"click\":function($event){(_vm.type = 'Front Matter'), (_vm.add_chapter = true)}}}):_vm._e()],1)],1),_c('q-dialog',{ref:\"chapterDialog\",attrs:{\"persistent\":\"\"},model:{value:(_vm.add_chapter),callback:function ($$v) {_vm.add_chapter=$$v},expression:\"add_chapter\"}},[_c('q-card',{staticStyle:{\"width\":\"700px\",\"max-width\":\"80vw\"}},[_c('q-card-section',[_c('div',{staticClass:\"text-h6\"},[_vm._v(\"Title\")])]),_c('q-card-section',{staticClass:\"q-pt-none\"},[_c('q-input',{ref:\"titleInput\",attrs:{\"dense\":\"\",\"placeholder\":_vm.titlePlaceholder,\"rules\":[\n            function (val) { return (val !== null && val !== '') || 'Please type the title'; },\n            function (val) { return val.length <= 100 || 'Title must be smaller than 100'; }\n          ],\"autofocus\":\"\",\"autogrow\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.$refs.draftInput.focus()}},model:{value:(_vm.chapter.title),callback:function ($$v) {_vm.$set(_vm.chapter, \"title\", $$v)},expression:\"chapter.title\"}})],1),_c('q-card-section',[_c('div',{staticClass:\"text-h6\"},[_vm._v(\"Draft\")])]),_c('q-card-section',{staticClass:\"q-pt-none\"},[_c('q-input',{ref:\"draftInput\",attrs:{\"dense\":\"\",\"placeholder\":_vm.draftPlaceholder,\"autogrow\":\"\"},model:{value:(_vm.chapter.draft),callback:function ($$v) {_vm.$set(_vm.chapter, \"draft\", $$v)},expression:\"chapter.draft\"}})],1),_c('q-card-actions',{staticClass:\"text-primary\",attrs:{\"align\":\"right\"}},[_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Cancel\"},on:{\"click\":function($event){_vm.chapter.title = '';\n            _vm.chapter.draft = '';\n\n            _vm.type = '';}}}),_c('q-btn',{attrs:{\"flat\":\"\",\"label\":\"Confirm\"},on:{\"click\":_vm.add}})],1)],1)],1)],1)}\nvar AddChapterButtonvue_type_template_id_27be10c0_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/components/write/AddChapterButton.vue?vue&type=template&id=27be10c0&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(\"ac1f\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(\"5319\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/write/AddChapterButton.vue?vue&type=script&lang=js&\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n/* harmony default export */ var AddChapterButtonvue_type_script_lang_js_ = ({\n  name: \"AddChapterButton\",\n  data: function data() {\n    return {\n      chapter: {\n        title: \"\",\n        draft: \"\",\n        index: 0,\n        text: \"\",\n        manuscript_id: this.$store.getters[\"write/manuscriptProperty\"](\"id\")\n      },\n      type: \"\",\n      add_chapter: false\n    };\n  },\n  computed: {\n    titlePlaceholder: function titlePlaceholder() {\n      return \"Title of this \" + this.type.toLowerCase() + \"?\";\n    },\n    draftPlaceholder: function draftPlaceholder() {\n      return \"What shall I include in this \" + this.type.toLowerCase() + \"?\";\n    }\n  },\n  methods: {\n    add: function add() {\n      var _this = this;\n\n      this.$refs.titleInput.validate();\n      this.$refs.draftInput.validate();\n\n      if (!this.$refs.titleInput.hasError && !this.$refs.draftInput.hasError) {\n        this.chapter.index = this.$store.getters[\"write/manuscriptProperty\"](this.type.toLowerCase().replace(\" \", \"_\") + \"s\").length;\n        var payload = {\n          chapter: this.chapter,\n          type: this.type\n        };\n        this.$store.dispatch(\"write/addChapter\", payload\n        /*, { root: true }*/\n        ).then(function (data) {}).catch(function (error) {\n          _this.$q.notify({\n            color: \"negative\",\n            position: \"top\",\n            message: error.response.data.message || \"Something went wrong\",\n            icon: \"error\"\n          });\n        });\n        /*if (this.type == \"Front Matter\") {\r\n          this.$emit(\"added\", chapter, \"front_matter\");\r\n        } else if (this.type == \"Chapter\") {\r\n          this.$emit(\"added\", chapter, \"chapter\");\r\n        } else if (this.type == \"Back Matter\") {\r\n          this.$emit(\"added\", chapter, \"back_matter\");\r\n        }*/\n\n        this.chapter.title = \"\";\n        this.chapter.draft = \"\";\n        this.type = \"\";\n        this.$refs.chapterDialog.hide();\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/write/AddChapterButton.vue?vue&type=script&lang=js&\n /* harmony default export */ var write_AddChapterButtonvue_type_script_lang_js_ = (AddChapterButtonvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/page-sticky/QPageSticky.js\nvar QPageSticky = __webpack_require__(\"de5e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/fab/QFab.js\nvar QFab = __webpack_require__(\"c294\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/fab/QFabAction.js\nvar QFabAction = __webpack_require__(\"72db\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/dialog/QDialog.js\nvar QDialog = __webpack_require__(\"24e8\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js\nvar QCard = __webpack_require__(\"f09f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardActions.js\nvar QCardActions = __webpack_require__(\"4b7e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/directives/ClosePopup.js\nvar ClosePopup = __webpack_require__(\"7f67\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/components/write/AddChapterButton.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  write_AddChapterButtonvue_type_script_lang_js_,\n  AddChapterButtonvue_type_template_id_27be10c0_render,\n  AddChapterButtonvue_type_template_id_27be10c0_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var AddChapterButton = (component.exports);\n\n\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QPageSticky: QPageSticky[\"a\" /* default */],QFab: QFab[\"a\" /* default */],QFabAction: QFabAction[\"a\" /* default */],QDialog: QDialog[\"a\" /* default */],QCard: QCard[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */]});runtime_auto_import_default()(component, 'directives', {ClosePopup: ClosePopup[\"a\" /* default */]});\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/write/ChaptersList.vue?vue&type=template&id=556bebc8&\nvar ChaptersListvue_type_template_id_556bebc8_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row q-ml-md\"},[_c('h2',{staticClass:\"q-mb-md text-capitalize\"},[_vm._v(_vm._s(_vm.type.split(\"-\").join(\" \")))])]),_c('q-separator',{attrs:{\"inset\":\"\"}}),_c('div',{staticClass:\"row q-ml-md\"},[_c('q-btn',{attrs:{\"icon\":\"reorder\",\"label\":\"Reorder\",\"color\":\"positive\"},on:{\"click\":function($event){_vm.reorder = true}}})],1),_c('div',{staticClass:\"q-mt-md row\"},_vm._l((this.chapters),function(chapter){return _c('chapter',{key:chapter.id,staticClass:\"col-md-3 col-sm-6 col-xs-12\",class:_vm.alignment,attrs:{\"chapter\":chapter,\"type\":_vm.$props.type},on:{\"titleEditted\":_vm.editTitle,\"draftEditted\":_vm.editDraft,\"deleted\":_vm.deleteChapter}})}),1),_c('q-dialog',{ref:\"reorderDialog\",attrs:{\"persistent\":\"\"},model:{value:(_vm.reorder),callback:function ($$v) {_vm.reorder=$$v},expression:\"reorder\"}},[_c('q-card',{staticStyle:{\"min-width\":\"350px\"}},[_c('q-card-section',[_c('div',{staticClass:\"text-h4 text-capitalize\"},[_vm._v(\"\\n          \"+_vm._s(_vm.type.split(\"-\").join(\" \"))+\"s\\n        \")])]),_c('q-card-section',{staticClass:\"q-pt-none\"},[_c('list-draggable',{attrs:{\"items\":_vm.chaptersCopy,\"dataName\":'title'},on:{\"dropped\":_vm.handleDrop}})],1),_c('q-card-actions',{staticClass:\"text-primary\",attrs:{\"align\":\"right\"}},[_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Cancel\"},on:{\"click\":function($event){_vm.chaptersCopy = _vm.chapters}}}),_c('q-btn',{attrs:{\"flat\":\"\",\"label\":\"Confirm\"},on:{\"click\":_vm.confirmOrder}})],1)],1)],1)],1)}\nvar ChaptersListvue_type_template_id_556bebc8_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/components/write/ChaptersList.vue?vue&type=template&id=556bebc8&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.sort.js\nvar es_array_sort = __webpack_require__(\"4e82\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js\nvar es_array_splice = __webpack_require__(\"a434\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js\nvar es_array_find = __webpack_require__(\"7db0\");\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/write/Chapter.vue?vue&type=template&id=9da7db6e&scoped=true&\nvar Chaptervue_type_template_id_9da7db6e_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('q-card',{staticClass:\"normal-card q-mb-md\"},[_c('q-card-section',[_c('div',{staticClass:\"items-center no-wrap\"},[_c('div',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"text-h6 ellipsis relative-position q-mb-sm q-pl-sm\",on:{\"click\":function($event){_vm.edit_title = true}}},[_vm._v(\"\\n          Title:\\n          \"),_c('span',{staticClass:\"text-body1 q-pa-sm text\"},[_vm._v(_vm._s(_vm.chapter.title))])]),_c('div',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"text-h6 relative-position q-mb-sm q-pl-sm\",on:{\"click\":function($event){_vm.edit_draft = true}}},[_vm._v(\"\\n          Draft:\\n          \"),_c('div',{staticClass:\"text-body1 text\"},[_vm._v(\"\\n            \"+_vm._s(_vm.chapter.draft)+\"\\n          \")])])])]),_c('q-card-actions',{staticClass:\"justify-end\"},[_c('div',{staticClass:\"row\"},[_c('q-btn',{attrs:{\"icon\":\"delete\",\"color\":\"negative\",\"round\":\"\",\"flat\":\"\"},on:{\"click\":function($event){_vm.confirm_delete = true}}})],1),_c('div',{staticClass:\"row\"},[_c('q-btn',{staticClass:\"q-ml-md\",attrs:{\"label\":\"Edit\",\"color\":\"primary\"},on:{\"click\":_vm.edit}})],1)])],1),_c('q-dialog',{ref:\"titleDialog\",attrs:{\"persistent\":\"\"},model:{value:(_vm.edit_title),callback:function ($$v) {_vm.edit_title=$$v},expression:\"edit_title\"}},[_c('q-card',{staticStyle:{\"min-width\":\"350px\"}},[_c('q-card-section',[_c('div',{staticClass:\"text-h6\"},[_vm._v(\"Title\")])]),_c('q-card-section',{staticClass:\"q-pt-none\"},[_c('q-input',{ref:\"titleInput\",attrs:{\"dense\":\"\",\"rules\":[\n            function (val) { return (val !== null && val !== '') || 'Please type the title'; },\n            function (val) { return val.length <= 100 || 'Title must be smaller than 100'; }\n          ],\"autofocus\":\"\",\"autogrow\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.confirmTitle($event)}},model:{value:(_vm.new_title),callback:function ($$v) {_vm.new_title=$$v},expression:\"new_title\"}})],1),_c('q-card-actions',{staticClass:\"text-primary\",attrs:{\"align\":\"right\"}},[_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Cancel\"},on:{\"click\":function($event){_vm.new_title = _vm.$props.chapter.title}}}),_c('q-btn',{attrs:{\"flat\":\"\",\"label\":\"Confirm\"},on:{\"click\":_vm.confirmTitle}})],1)],1)],1),_c('q-dialog',{ref:\"draftDialog\",attrs:{\"persistent\":\"\"},model:{value:(_vm.edit_draft),callback:function ($$v) {_vm.edit_draft=$$v},expression:\"edit_draft\"}},[_c('q-card',{staticStyle:{\"min-width\":\"350px\"}},[_c('q-card-section',[_c('div',{staticClass:\"text-h6\"},[_vm._v(\"Draft\")])]),_c('q-card-section',{staticClass:\"q-pt-none\"},[_c('q-input',{ref:\"draftInput\",attrs:{\"dense\":\"\",\"autofocus\":\"\",\"autogrow\":\"\"},model:{value:(_vm.new_draft),callback:function ($$v) {_vm.new_draft=$$v},expression:\"new_draft\"}})],1),_c('q-card-actions',{staticClass:\"text-primary\",attrs:{\"align\":\"right\"}},[_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Cancel\"},on:{\"click\":function($event){_vm.new_draft = _vm.$props.chapter.draft}}}),_c('q-btn',{attrs:{\"flat\":\"\",\"label\":\"Confirm\"},on:{\"click\":_vm.confirmDraft}})],1)],1)],1),_c('q-dialog',{ref:\"deleteDialog\",attrs:{\"persistent\":\"\"},model:{value:(_vm.confirm_delete),callback:function ($$v) {_vm.confirm_delete=$$v},expression:\"confirm_delete\"}},[_c('q-card',[_c('q-card-section',{staticClass:\"row items-center\"},[_c('span',{staticClass:\"q-ml-sm\"},[_vm._v(\"Are you sure you want delete? All related data of the chapter\\n          (including child sections if present) will be lost\")])]),_c('q-card-actions',{attrs:{\"align\":\"right\"}},[_c('q-btn',{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"flat\":\"\",\"label\":\"Cancel\",\"color\":\"primary\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"icon\":\"delete\",\"label\":\"Delete\",\"color\":\"negative\"},on:{\"click\":_vm.confirmDelete}})],1)],1)],1)],1)}\nvar Chaptervue_type_template_id_9da7db6e_scoped_true_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/components/write/Chapter.vue?vue&type=template&id=9da7db6e&scoped=true&\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/write/Chapter.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n/* harmony default export */ var Chaptervue_type_script_lang_js_ = ({\n  name: \"Chapter\",\n  props: {\n    chapter: {\n      type: Object,\n      required: true\n    },\n    type: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      new_title: this.$props.chapter.title,\n      new_draft: this.$props.chapter.draft,\n      edit_title: false,\n      edit_draft: false,\n      edit_all: false,\n      confirm_delete: false\n    };\n  },\n  methods: {\n    confirmTitle: function confirmTitle() {\n      var _this = this;\n\n      this.$refs.titleInput.validate();\n\n      if (!this.$refs.titleInput.hasError) {\n        var originalTitle = this.$props.chapter.title;\n        this.$emit(\"titleEditted\", this.new_title, this.$props.chapter);\n        var payload = {\n          chapter: {\n            title: this.new_title\n          },\n          id: this.$props.chapter.id,\n          type: this.$props.type\n        };\n        this.$store.dispatch(\"write/editChapter\", payload\n        /*, { root: true }*/\n        ).then(function (data) {}).catch(function (error) {\n          _this.$emit(\"titleEditted\", originalTitle, _this.$props.chapter);\n\n          _this.$q.notify({\n            color: \"negative\",\n            position: \"top\",\n            message: error.response.data.message || \"Something went wrong\",\n            icon: \"error\"\n          });\n        });\n        this.$refs.titleDialog.hide();\n      }\n    },\n    confirmDraft: function confirmDraft() {\n      var _this2 = this;\n\n      this.$refs.draftInput.validate();\n\n      if (!this.$refs.draftInput.hasError) {\n        var originalDraft = this.$props.chapter.draft;\n        this.$emit(\"draftEditted\", this.new_draft, this.$props.chapter);\n        var payload = {\n          chapter: {\n            draft: this.new_draft\n          },\n          id: this.$props.chapter.id,\n          type: this.$props.type\n        };\n        this.$store.dispatch(\"write/editChapter\", payload\n        /*, { root: true }*/\n        ).then(function (data) {}).catch(function (error) {\n          _this2.$emit(\"titleEditted\", originalDraft, _this2.$props.chapter);\n\n          _this2.$q.notify({\n            color: \"negative\",\n            position: \"top\",\n            message: error.response.data.message || \"Something went wrong\",\n            icon: \"error\"\n          });\n        });\n        this.$refs.draftDialog.hide();\n      }\n    },\n    confirmDelete: function confirmDelete() {\n      this.$emit(\"deleted\", this.chapter);\n      this.$refs.deleteDialog.hide();\n    },\n    edit: function edit() {\n      switch (this.$props.type) {\n        case \"front-matter\":\n          this.$router.push({\n            name: \"write-editor\",\n            query: {\n              front_matter: this.$props.chapter.id\n            }\n          });\n          break;\n\n        case \"chapter\":\n          this.$router.push({\n            name: \"write-editor\",\n            query: {\n              chapter: this.$props.chapter.id\n            }\n          });\n          break;\n\n        case \"back-matter\":\n          this.$router.push({\n            name: \"write-editor\",\n            query: {\n              back_matter: this.$props.chapter.id\n            }\n          });\n          break;\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/write/Chapter.vue?vue&type=script&lang=js&\n /* harmony default export */ var write_Chaptervue_type_script_lang_js_ = (Chaptervue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/components/write/Chapter.vue?vue&type=style&index=0&id=9da7db6e&lang=scss&scoped=true&namespaced=true&\nvar Chaptervue_type_style_index_0_id_9da7db6e_lang_scss_scoped_true_namespaced_true_ = __webpack_require__(\"e4a8\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/directives/Ripple.js + 1 modules\nvar Ripple = __webpack_require__(\"714f\");\n\n// CONCATENATED MODULE: ./src/components/write/Chapter.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar Chapter_component = Object(componentNormalizer[\"a\" /* default */])(\n  write_Chaptervue_type_script_lang_js_,\n  Chaptervue_type_template_id_9da7db6e_scoped_true_render,\n  Chaptervue_type_template_id_9da7db6e_scoped_true_staticRenderFns,\n  false,\n  null,\n  \"9da7db6e\",\n  null\n  \n)\n\n/* harmony default export */ var Chapter = (Chapter_component.exports);\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(Chapter_component, 'components', {QCard: QCard[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QDialog: QDialog[\"a\" /* default */],QInput: QInput[\"a\" /* default */]});runtime_auto_import_default()(Chapter_component, 'directives', {Ripple: Ripple[\"a\" /* default */],ClosePopup: ClosePopup[\"a\" /* default */]});\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/helpers/ListDraggable.vue?vue&type=template&id=65c93e26&scoped=true&\nvar ListDraggablevue_type_template_id_65c93e26_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"simple-page\"},[_c('Container',{attrs:{\"lock-axis\":\"y\"},on:{\"drop\":_vm.onDrop}},_vm._l((_vm.itemsCopy),function(item){return _c('Draggable',{key:item.id},[_c('div',{staticClass:\"draggable-item\"},[_vm._v(\"\\n        \"+_vm._s(item[_vm.$props.dataName])+\"\\n      \")])])}),1)],1)}\nvar ListDraggablevue_type_template_id_65c93e26_scoped_true_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/components/helpers/ListDraggable.vue?vue&type=template&id=65c93e26&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/toConsumableArray.js\nvar toConsumableArray = __webpack_require__(\"448a\");\nvar toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);\n\n// EXTERNAL MODULE: ./node_modules/vue-smooth-dnd/dist/vue-smooth-dnd.esm.js\nvar vue_smooth_dnd_esm = __webpack_require__(\"3f7d\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/helpers/ListDraggable.vue?vue&type=script&lang=js&\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var ListDraggablevue_type_script_lang_js_ = ({\n  name: \"ListDraggable\",\n  components: {\n    Container: vue_smooth_dnd_esm[\"Container\"],\n    Draggable: vue_smooth_dnd_esm[\"Draggable\"]\n  },\n  props: {\n    items: {\n      type: Array,\n      required: true\n    },\n    dataName: {\n      type: String,\n      default: \"data\"\n    }\n  },\n  data: function data() {\n    return {\n      itemsCopy: this.$props.items\n    };\n  },\n  methods: {\n    onDrop: function onDrop(dropResult) {\n      this.itemsCopy = this.applyDrag(this.itemsCopy, dropResult);\n      this.$emit(\"dropped\", this.itemsCopy);\n    },\n    applyDrag: function applyDrag(arr, dragResult) {\n      var removedIndex = dragResult.removedIndex,\n          addedIndex = dragResult.addedIndex,\n          payload = dragResult.payload;\n      if (removedIndex === null && addedIndex === null) return arr;\n\n      var result = toConsumableArray_default()(arr);\n\n      var itemToAdd = payload;\n\n      if (removedIndex !== null) {\n        itemToAdd = result.splice(removedIndex, 1)[0];\n      }\n\n      if (addedIndex !== null) {\n        result.splice(addedIndex, 0, itemToAdd);\n      }\n\n      return result;\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/helpers/ListDraggable.vue?vue&type=script&lang=js&\n /* harmony default export */ var helpers_ListDraggablevue_type_script_lang_js_ = (ListDraggablevue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/components/helpers/ListDraggable.vue?vue&type=style&index=0&id=65c93e26&lang=scss&scoped=true&\nvar ListDraggablevue_type_style_index_0_id_65c93e26_lang_scss_scoped_true_ = __webpack_require__(\"3241\");\n\n// CONCATENATED MODULE: ./src/components/helpers/ListDraggable.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar ListDraggable_component = Object(componentNormalizer[\"a\" /* default */])(\n  helpers_ListDraggablevue_type_script_lang_js_,\n  ListDraggablevue_type_template_id_65c93e26_scoped_true_render,\n  ListDraggablevue_type_template_id_65c93e26_scoped_true_staticRenderFns,\n  false,\n  null,\n  \"65c93e26\",\n  null\n  \n)\n\n/* harmony default export */ var ListDraggable = (ListDraggable_component.exports);\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/write/ChaptersList.vue?vue&type=script&lang=js&\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var ChaptersListvue_type_script_lang_js_ = ({\n  components: {\n    Chapter: Chapter,\n    ListDraggable: ListDraggable\n  },\n  mounted: function mounted() {\n    this.chaptersCopy = this.chapters;\n  },\n  props: {\n    type: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      chaptersCopy: [],\n      reorder: false\n    };\n  },\n  computed: {\n    copyChapters: function copyChapters() {\n      var items = [];\n\n      for (var i = 0; i < this.chaptersCopy.length; i++) {\n        var chapter = this.chaptersCopy[i];\n        items.push({\n          id: chapter.id,\n          data: chapter.title,\n          draft: chapter.draft,\n          text: chapter.text,\n          index: chapter.index\n        });\n      }\n\n      return items;\n    },\n    chapters: function chapters() {\n      var chap = null;\n\n      switch (this.$props.type) {\n        case \"chapter\":\n          chap = this.$store.getters[\"write/manuscriptProperty\"](\"chapters\");\n          break;\n\n        case \"front-matter\":\n          chap = this.$store.getters[\"write/manuscriptProperty\"](\"front_matters\");\n          break;\n\n        case \"back-matter\":\n          chap = this.$store.getters[\"write/manuscriptProperty\"](\"back_matters\");\n          break;\n\n        case \"section\":\n          // code block\n          break;\n\n        default: // code block\n\n      }\n\n      chap.sort(this.compareIndex);\n      return chap;\n    },\n    alignment: function alignment() {\n      return this.$q.screen.lt.md ? \"justify-center\" : \"justify-start\";\n    }\n  },\n  methods: {\n    compareIndex: function compareIndex(a, b) {\n      if (a.index < b.index) {\n        return -1;\n      }\n\n      if (a.index > b.index) {\n        return 1;\n      }\n\n      return 0;\n    },\n    editTitle: function editTitle(new_title, chapter) {\n      chapter.title = new_title;\n    },\n    editDraft: function editDraft(new_draft, chapter) {\n      chapter.draft = new_draft;\n    },\n    deleteChapter: function deleteChapter(chapter) {\n      var _this = this;\n\n      var index = this.chapters.indexOf(chapter);\n      this.chapters.splice(index, 1);\n      var payload = {\n        id: chapter.id,\n        type: this.$props.type\n      };\n      this.$store.dispatch(\"write/deleteChapter\", payload\n      /*, { root: true }*/\n      ).then(function (data) {}).catch(function (error) {\n        _this.$q.notify({\n          color: \"negative\",\n          position: \"top\",\n          message: error.response.data.message || \"Something went wrong\",\n          icon: \"error\"\n        });\n\n        _this.chapters.splice(index, 0, chapter);\n      });\n    },\n    confirmOrder: function confirmOrder() {\n      var _this2 = this;\n\n      var _loop = function _loop() {\n        var chapter = _this2.chapters[i];\n\n        var chapterCopy = _this2.chaptersCopy.find(function (obj) {\n          return obj.id === chapter.id;\n        });\n\n        if (chapter.index != chapterCopy.index) {\n          var payload = {\n            chapter: {\n              index: chapterCopy.index,\n              manuscript_id: _this2.$store.getters[\"write/manuscriptProperty\"](\"id\")\n            },\n            type: _this2.$props.type,\n            id: chapter.id\n          };\n\n          _this2.$store.dispatch(\"write/editChapter\", payload\n          /*, { root: true }*/\n          ).then(function (data) {}).catch(function (error) {\n            _this2.$q.notify({\n              color: \"negative\",\n              position: \"top\",\n              message: error.response.data.message || \"Something went wrong\",\n              icon: \"error\"\n            });\n          });\n        }\n      };\n\n      for (var i = 0; i < this.chapters.length; i++) {\n        _loop();\n      }\n\n      this.$refs.reorderDialog.hide();\n    },\n    handleDrop: function handleDrop(items) {\n      for (var i = 0; i < items.length; i++) {\n        items[i].index = i + 1;\n      }\n\n      this.chaptersCopy = items;\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/write/ChaptersList.vue?vue&type=script&lang=js&\n /* harmony default export */ var write_ChaptersListvue_type_script_lang_js_ = (ChaptersListvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/quasar/src/components/separator/QSeparator.js\nvar QSeparator = __webpack_require__(\"eb85\");\n\n// CONCATENATED MODULE: ./src/components/write/ChaptersList.vue\n\n\n\n\n\n/* normalize component */\n\nvar ChaptersList_component = Object(componentNormalizer[\"a\" /* default */])(\n  write_ChaptersListvue_type_script_lang_js_,\n  ChaptersListvue_type_template_id_556bebc8_render,\n  ChaptersListvue_type_template_id_556bebc8_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ChaptersList = (ChaptersList_component.exports);\n\n\n\n\n\n\n\nruntime_auto_import_default()(ChaptersList_component, 'components', {QSeparator: QSeparator[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QDialog: QDialog[\"a\" /* default */],QCard: QCard[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */]});runtime_auto_import_default()(ChaptersList_component, 'directives', {ClosePopup: ClosePopup[\"a\" /* default */]});\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"2f62\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/write/OverviewPage.vue?vue&type=script&lang=js&\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var OverviewPagevue_type_script_lang_js_ = ({\n  components: {\n    ChaptersList: ChaptersList,\n    AddChapterButton: AddChapterButton\n  },\n  name: \"ChapterPage\",\n  computed: objectSpread2_default()({}, Object(vuex_esm[\"b\" /* mapState */])({\n    count: function count(state) {\n      return state.module.count;\n    } // Uses the state of the module\n\n  })),\n  data: function data() {\n    return {\n      front_matters: [{\n        id: \"123\",\n        title: \"He Returns\",\n        draft: \"Write about how he returns\"\n      }],\n      chapters: [{\n        id: \"123\",\n        title: \"He Returns\",\n        draft: \"Write about how he returns\"\n      }],\n      back_matters: [{\n        id: \"123\",\n        title: \"He Returns\",\n        draft: \"Write about how he returns\"\n      }]\n    };\n  },\n  methods: {}\n});\n// CONCATENATED MODULE: ./src/pages/write/OverviewPage.vue?vue&type=script&lang=js&\n /* harmony default export */ var write_OverviewPagevue_type_script_lang_js_ = (OverviewPagevue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js\nvar QPage = __webpack_require__(\"9989\");\n\n// CONCATENATED MODULE: ./src/pages/write/OverviewPage.vue\n\n\n\n\n\n/* normalize component */\n\nvar OverviewPage_component = Object(componentNormalizer[\"a\" /* default */])(\n  write_OverviewPagevue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var OverviewPage = __webpack_exports__[\"default\"] = (OverviewPage_component.exports);\n\n\n\nruntime_auto_import_default()(OverviewPage_component, 'components', {QPage: QPage[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */]});\n\n\n/***/ }),\n\n/***/ \"3241\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_2_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_2_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_2_3_node_modules_quasar_app_lib_webpack_loader_quasar_scss_variables_js_node_modules_quasar_app_lib_webpack_loader_auto_import_client_js_kebab_node_modules_vue_loader_lib_index_js_vue_loader_options_ListDraggable_vue_vue_type_style_index_0_id_65c93e26_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"6a2f\");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_2_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_2_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_2_3_node_modules_quasar_app_lib_webpack_loader_quasar_scss_variables_js_node_modules_quasar_app_lib_webpack_loader_auto_import_client_js_kebab_node_modules_vue_loader_lib_index_js_vue_loader_options_ListDraggable_vue_vue_type_style_index_0_id_65c93e26_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_2_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_2_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_2_3_node_modules_quasar_app_lib_webpack_loader_quasar_scss_variables_js_node_modules_quasar_app_lib_webpack_loader_auto_import_client_js_kebab_node_modules_vue_loader_lib_index_js_vue_loader_options_ListDraggable_vue_vue_type_style_index_0_id_65c93e26_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n/***/ }),\n\n/***/ \"6a2f\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ \"e4a8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_2_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_2_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_2_3_node_modules_quasar_app_lib_webpack_loader_quasar_scss_variables_js_node_modules_quasar_app_lib_webpack_loader_auto_import_client_js_kebab_node_modules_vue_loader_lib_index_js_vue_loader_options_Chapter_vue_vue_type_style_index_0_id_9da7db6e_lang_scss_scoped_true_namespaced_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"153d\");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_2_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_2_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_2_3_node_modules_quasar_app_lib_webpack_loader_quasar_scss_variables_js_node_modules_quasar_app_lib_webpack_loader_auto_import_client_js_kebab_node_modules_vue_loader_lib_index_js_vue_loader_options_Chapter_vue_vue_type_style_index_0_id_9da7db6e_lang_scss_scoped_true_namespaced_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_2_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_2_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_2_3_node_modules_quasar_app_lib_webpack_loader_quasar_scss_variables_js_node_modules_quasar_app_lib_webpack_loader_auto_import_client_js_kebab_node_modules_vue_loader_lib_index_js_vue_loader_options_Chapter_vue_vue_type_style_index_0_id_9da7db6e_lang_scss_scoped_true_namespaced_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n/***/ })\n\n}]);","inputSourceMap":null}