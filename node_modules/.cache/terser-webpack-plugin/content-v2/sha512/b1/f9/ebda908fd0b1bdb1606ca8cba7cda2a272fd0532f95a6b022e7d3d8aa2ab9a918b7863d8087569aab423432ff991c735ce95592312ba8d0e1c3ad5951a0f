{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[17],{eb35:function(s,e,o){\"use strict\";o.r(e);var t=function(){var s=this,e=s.$createElement,o=s._self._c||e;return o(\"q-page\",{staticClass:\"flex flex-center\"},[o(\"q-stepper\",{ref:\"stepper\",attrs:{color:\"primary\",\"header-nav\":\"\",animated:\"\"},model:{value:s.step,callback:function(e){s.step=e},expression:\"step\"}},[o(\"q-step\",{attrs:{name:1,title:\"Current Password\",icon:\"settings\",error:!s.correct_password,done:s.step>1}},[s._v(\"\\n      Please enter your current password.\\n      \"),o(\"q-input\",{ref:\"old_password\",staticClass:\"q-ma-md\",attrs:{filled:\"\",type:s.showPwd?\"text\":\"password\",label:\"Password\",\"lazy-rules\":\"\",rules:[function(s){return null!==s&&\"\"!==s||\"Please type your password\"},function(s){return s.length<=100||\"Password must not exceeds 100\"},function(s){return s.length>8||\"Password must exceeds 8\"}]},on:{keyup:function(e){return!e.type.indexOf(\"key\")&&s._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:s.checkPassword(e)}},scopedSlots:s._u([{key:\"append\",fn:function(){return[o(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:s.showPwd?\"visibility_off\":\"visibility\"},on:{click:function(e){s.showPwd=!s.showPwd}}})]},proxy:!0}]),model:{value:s.old_password,callback:function(e){s.old_password=e},expression:\"old_password\"}}),o(\"q-btn\",{attrs:{label:\"Check Password\",color:\"primary\"},on:{click:s.checkPassword}})],1),o(\"q-step\",{attrs:{name:2,title:\"New Password\",icon:\"vpn_key\",done:s.step>2}},[s._v(\"\\n      Please enter your new password.\\n      \"),o(\"q-input\",{ref:\"password\",staticClass:\"q-ma-md\",attrs:{filled:\"\",type:s.showPwd?\"text\":\"password\",label:\"Password\",\"lazy-rules\":\"\",rules:[function(s){return null!==s&&\"\"!==s||\"Please type your password\"},function(s){return s.length<=100||\"Password must not exceeds 100\"},function(s){return s.length>8||\"Password must exceeds 8\"}]},on:{keyup:function(e){return!e.type.indexOf(\"key\")&&s._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:s.$refs.password2.focus()}},scopedSlots:s._u([{key:\"append\",fn:function(){return[o(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:s.showPwd?\"visibility_off\":\"visibility\"},on:{click:function(e){s.showPwd=!s.showPwd}}})]},proxy:!0}]),model:{value:s.password,callback:function(e){s.password=e},expression:\"password\"}}),o(\"q-input\",{ref:\"password2\",staticClass:\"q-ma-md\",attrs:{filled:\"\",type:s.showPwd?\"text\":\"password\",label:\"Reenter Password\",\"lazy-rules\":\"\",rules:[function(s){return null!==s&&\"\"!==s||\"Please type your password\"},function(s){return s.length<=100||\"Password must not exceeds 100\"},function(s){return s.length>8||\"Password must exceeds 8\"}]},on:{keyup:function(e){return!e.type.indexOf(\"key\")&&s._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:s.submitPassword(e)}},scopedSlots:s._u([{key:\"append\",fn:function(){return[o(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:s.showPwd?\"visibility_off\":\"visibility\"},on:{click:function(e){s.showPwd=!s.showPwd}}})]},proxy:!0}]),model:{value:s.password2,callback:function(e){s.password2=e},expression:\"password2\"}}),o(\"q-btn\",{attrs:{label:\"Change Password\",color:\"primary\"},on:{click:s.submitPassword}})],1)],1)],1)},r=[],n={name:\"ChangePasswordPage\",mounted:function(){this.$q.notify({color:\"orange\",position:\"top\",message:\"You can change your password only within 1 hour after you have logged in.\",timeout:1e4,icon:\"warning\"})},data:function(){return{step:1,showPwd:!1,old_password:\"\",password:\"\",password2:\"\",correct_password:!1}},methods:{checkPassword:function(){var s=this;this.$refs.old_password.validate(),console.log(this.$store.state.user),this.$refs.old_password.hasError||this.$store.dispatch(\"user/login\",{email:this.$store.state.user.user.email,password:this.old_password}).then((function(e){console.log(e),s.correct_password=!0,s.step=2})).catch((function(e){s.loading=!1,s.$q.notify({color:\"negative\",position:\"top\",message:e.response.data.message||\"Something went wrong\",icon:\"error\"})}))},submitPassword:function(){var s=this;this.$refs.password.validate(),this.$refs.password2.validate(),this.correct_password?this.$refs.password.hasError||this.$refs.password2.hasError||this.$store.dispatch(\"user/edit\",{password:this.password}).then((function(e){s.$q.notify({icon:\"done\",color:\"positive\",message:\"Password Changed\"}),s.$router.push({name:\"app-profile\"})})).catch((function(e){s.loading=!1,s.$q.notify({color:\"negative\",position:\"top\",message:e.response.data.message||\"Please relogin to edit your credentials\",icon:\"error\"})})):this.step=1}}},a=n,i=o(\"2877\"),d=o(\"9989\"),l=o(\"f531\"),c=o(\"87fe\"),p=o(\"27f9\"),u=o(\"0016\"),w=o(\"9c40\"),f=o(\"eebe\"),h=o.n(f),y=Object(i[\"a\"])(a,t,r,!1,null,null,null);e[\"default\"]=y.exports;h()(y,\"components\",{QPage:d[\"a\"],QStepper:l[\"a\"],QStep:c[\"a\"],QInput:p[\"a\"],QIcon:u[\"a\"],QBtn:w[\"a\"]})}}]);","name":"js/17.0e4f1ee3.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[17],{\n\n/***/ \"eb35\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/app/ChangePasswordPage.vue?vue&type=template&id=bcb8e5ae&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{staticClass:\"flex flex-center\"},[_c('q-stepper',{ref:\"stepper\",attrs:{\"color\":\"primary\",\"header-nav\":\"\",\"animated\":\"\"},model:{value:(_vm.step),callback:function ($$v) {_vm.step=$$v},expression:\"step\"}},[_c('q-step',{attrs:{\"name\":1,\"title\":\"Current Password\",\"icon\":\"settings\",\"error\":!_vm.correct_password,\"done\":_vm.step > 1}},[_vm._v(\"\\n      Please enter your current password.\\n      \"),_c('q-input',{ref:\"old_password\",staticClass:\"q-ma-md\",attrs:{\"filled\":\"\",\"type\":_vm.showPwd ? 'text' : 'password',\"label\":\"Password\",\"lazy-rules\":\"\",\"rules\":[\n          function (val) { return (val !== null && val !== '') || 'Please type your password'; },\n          function (val) { return val.length <= 100 || 'Password must not exceeds 100'; },\n          function (val) { return val.length > 8 || 'Password must exceeds 8'; }\n        ]},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.checkPassword($event)}},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.showPwd ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.showPwd = !_vm.showPwd}}})]},proxy:true}]),model:{value:(_vm.old_password),callback:function ($$v) {_vm.old_password=$$v},expression:\"old_password\"}}),_c('q-btn',{attrs:{\"label\":\"Check Password\",\"color\":\"primary\"},on:{\"click\":_vm.checkPassword}})],1),_c('q-step',{attrs:{\"name\":2,\"title\":\"New Password\",\"icon\":\"vpn_key\",\"done\":_vm.step > 2}},[_vm._v(\"\\n      Please enter your new password.\\n      \"),_c('q-input',{ref:\"password\",staticClass:\"q-ma-md\",attrs:{\"filled\":\"\",\"type\":_vm.showPwd ? 'text' : 'password',\"label\":\"Password\",\"lazy-rules\":\"\",\"rules\":[\n          function (val) { return (val !== null && val !== '') || 'Please type your password'; },\n          function (val) { return val.length <= 100 || 'Password must not exceeds 100'; },\n          function (val) { return val.length > 8 || 'Password must exceeds 8'; }\n        ]},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.$refs.password2.focus()}},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.showPwd ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.showPwd = !_vm.showPwd}}})]},proxy:true}]),model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('q-input',{ref:\"password2\",staticClass:\"q-ma-md\",attrs:{\"filled\":\"\",\"type\":_vm.showPwd ? 'text' : 'password',\"label\":\"Reenter Password\",\"lazy-rules\":\"\",\"rules\":[\n          function (val) { return (val !== null && val !== '') || 'Please type your password'; },\n          function (val) { return val.length <= 100 || 'Password must not exceeds 100'; },\n          function (val) { return val.length > 8 || 'Password must exceeds 8'; }\n        ]},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitPassword($event)}},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":_vm.showPwd ? 'visibility_off' : 'visibility'},on:{\"click\":function($event){_vm.showPwd = !_vm.showPwd}}})]},proxy:true}]),model:{value:(_vm.password2),callback:function ($$v) {_vm.password2=$$v},expression:\"password2\"}}),_c('q-btn',{attrs:{\"label\":\"Change Password\",\"color\":\"primary\"},on:{\"click\":_vm.submitPassword}})],1)],1)],1)}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/pages/app/ChangePasswordPage.vue?vue&type=template&id=bcb8e5ae&\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/app/ChangePasswordPage.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n/* harmony default export */ var ChangePasswordPagevue_type_script_lang_js_ = ({\n  name: \"ChangePasswordPage\",\n  mounted: function mounted() {\n    this.$q.notify({\n      color: \"orange\",\n      position: \"top\",\n      message: \"You can change your password only within 1 hour after you have logged in.\",\n      timeout: 10000,\n      icon: \"warning\"\n    });\n  },\n  data: function data() {\n    return {\n      step: 1,\n      showPwd: false,\n      old_password: \"\",\n      password: \"\",\n      password2: \"\",\n      correct_password: false\n    };\n  },\n  methods: {\n    checkPassword: function checkPassword() {\n      var _this = this;\n\n      this.$refs.old_password.validate();\n      console.log(this.$store.state.user);\n\n      if (!this.$refs.old_password.hasError) {\n        this.$store.dispatch(\"user/login\", {\n          email: this.$store.state.user.user.email,\n          password: this.old_password\n        }\n        /*, { root: true }*/\n        ).then(function (data) {\n          console.log(data);\n          _this.correct_password = true;\n          _this.step = 2;\n        }).catch(function (error) {\n          _this.loading = false;\n\n          _this.$q.notify({\n            color: \"negative\",\n            position: \"top\",\n            message: error.response.data.message || \"Something went wrong\",\n            icon: \"error\"\n          });\n        });\n      }\n    },\n    submitPassword: function submitPassword() {\n      var _this2 = this;\n\n      this.$refs.password.validate();\n      this.$refs.password2.validate();\n\n      if (!this.correct_password) {\n        this.step = 1;\n        return;\n      }\n\n      if (!this.$refs.password.hasError && !this.$refs.password2.hasError) {\n        this.$store.dispatch(\"user/edit\", {\n          password: this.password\n        }\n        /*, { root: true }*/\n        ).then(function (data) {\n          _this2.$q.notify({\n            icon: \"done\",\n            color: \"positive\",\n            message: \"Password Changed\"\n          });\n\n          _this2.$router.push({\n            name: \"app-profile\"\n          });\n        }).catch(function (error) {\n          _this2.loading = false;\n\n          _this2.$q.notify({\n            color: \"negative\",\n            position: \"top\",\n            message: error.response.data.message || \"Please relogin to edit your credentials\",\n            icon: \"error\"\n          });\n        });\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/pages/app/ChangePasswordPage.vue?vue&type=script&lang=js&\n /* harmony default export */ var app_ChangePasswordPagevue_type_script_lang_js_ = (ChangePasswordPagevue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js\nvar QPage = __webpack_require__(\"9989\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/stepper/QStepper.js\nvar QStepper = __webpack_require__(\"f531\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/stepper/QStep.js\nvar QStep = __webpack_require__(\"87fe\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js\nvar QIcon = __webpack_require__(\"0016\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/pages/app/ChangePasswordPage.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  app_ChangePasswordPagevue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ChangePasswordPage = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QPage: QPage[\"a\" /* default */],QStepper: QStepper[\"a\" /* default */],QStep: QStep[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QIcon: QIcon[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}